version: "3.6"
services:
  node:
    image: too-many-cells-js:latest
    build: ./
    depends_on:
      - mongo
    #persist trees across runs
    volumes:
      - tree-data:/usr/app/static/files
    environment:
      - MONGO_CONNECTION_STRING=mongodb://mongo:27017/tmc
      - MONGO_DB=tmc
    networks:
      - tmc-network
  mongo:
    image: mongo:5.0
    volumes:
      - mongo-data:/data/db
    networks:
      - tmc-network

volumes:
  mongo-data:
  tree-data:

networks:
  tmc-network: